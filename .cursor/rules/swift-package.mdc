---
description: "Swift Package Manager 개발 가이드라인, 모듈 구조, 빌드 설정, 의존성 관리. Package.swift 수정, 새 타겟 추가, 또는 패키지 구조 작업 시 적용."
globs: ["Package.swift", "Sources/**/*.swift"]
alwaysApply: false
---

# Swift Package Development Guidelines

## 패키지 구조

InnoFlow는 Swift Package Manager를 사용하는 멀티 타겟 패키지입니다:

- **InnoFlow**: 핵심 프레임워크 라이브러리
- **InnoFlowMacros**: 매크로 구현 (swift-syntax 사용)
- **InnoFlowTesting**: 테스트 유틸리티 (`TestStore` 등)

## 타겟 구조

### Core Library (InnoFlow)
- `Sources/InnoFlow/`에 위치
- `InnoFlowMacros`에 의존
- 공개 API: `Store`, `Reducer`, `Reduce`, `EffectOutput`, 매크로들

### Macro Implementation (InnoFlowMacros)
- `Sources/InnoFlowMacros/`에 위치
- `swift-syntax` 패키지에 의존
- `@InnoFlow`, `@BindableField` 매크로 구현

### Testing Utilities (InnoFlowTesting)
- `Sources/InnoFlowTesting/`에 위치
- `InnoFlow`에 의존
- `TestStore` 및 테스트 헬퍼 제공

## 빌드 및 테스트

### 빌드
```bash
swift build
```

### 테스트
```bash
# 모든 테스트 실행
swift test

# 코드 커버리지와 함께 테스트 실행
swift test --enable-code-coverage --parallel

# 특정 테스트 실행
swift test --filter InnoFlowTests.StoreTests/storeIncrement
```

### 문서 생성
```bash
swift package generate-documentation --target InnoFlow
```

## 코딩 스타일

- Swift API Design Guidelines 준수
- 4칸 들여쓰기 사용
- 공개 API는 `///`로 문서화
- 값 타입 선호, 명시적 타입 사용
- Reducer는 작고 집중적으로 유지

## 모듈 간 의존성

- `InnoFlow` → `InnoFlowMacros` (매크로 사용)
- `InnoFlowTesting` → `InnoFlow` (테스트용)
- 테스트 타겟은 해당 타겟에 의존

## 공개 API 설계

- 최소한의 공개 API 노출
- 내부 구현 세부사항은 `internal` 또는 `private` 유지
- 매크로는 공개 API의 일부이지만 구현은 내부에 유지

## 버전 관리

- Semantic Versioning 준수
- Breaking changes는 Major 버전 증가
- 새로운 기능은 Minor 버전 증가
- 버그 수정은 Patch 버전 증가

## 플랫폼 지원

패키지는 다음 플랫폼을 지원합니다:
- iOS 18.0+
- macOS 15.0+
- tvOS 18.0+
- watchOS 11.0+

## 의존성 관리

- 최소 버전 요구사항 명시
- 가능한 한 최신 버전 사용
- 보안 업데이트 정기적으로 확인
